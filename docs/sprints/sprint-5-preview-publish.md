# Sprint 5: 预览导出与发布

## Sprint 信息

| 属性 | 值 |
|------|-----|
| Sprint 编号 | 5 |
| Sprint 名称 | Preview & Publish |
| 状态 | Planned |
| 创建日期 | 2026-01-22 |

## Sprint 目标

完成视频预览、下载导出和发布辅助功能，建立监控告警系统，交付 MVP 完整功能。

## 交付物

- 视频预览播放器
- 下载导出功能 (成品视频 + 素材包)
- 发布辅助服务 (话题推荐 + 标题推荐)
- 发布辅助 UI (复制功能)
- 监控告警系统

## Sprint Backlog

### Story 5.1: 视频预览播放器
| 属性 | 值 |
|------|-----|
| 优先级 | P0 |
| 类型 | Frontend |
| 依赖 | 4.3 |
| 文件 | [5.1.video-preview.md](../stories/5.1.video-preview.md) |

**Tasks:**
- [ ] T1: 视频播放器组件
- [ ] T2: 播放控制逻辑
- [ ] T3: 镜头列表组件

---

### Story 5.2: 下载导出功能
| 属性 | 值 |
|------|-----|
| 优先级 | P0 |
| 类型 | Full-Stack |
| 依赖 | 5.1 |
| 文件 | [5.2.video-export.md](../stories/5.2.video-export.md) |

**Tasks:**
- [ ] T1: 下载视频 API
- [ ] T2: 素材包打包 API
- [ ] T3: 下载按钮组件

---

### Story 5.3: 发布辅助服务
| 属性 | 值 |
|------|-----|
| 优先级 | P0 |
| 类型 | Backend |
| 依赖 | 4.3 |
| 文件 | [5.3.publish-assist-service.md](../stories/5.3.publish-assist-service.md) |

**Tasks:**
- [ ] T1: 话题生成 Prompt 设计
- [ ] T2: 标题生成 Prompt 设计
- [ ] T3: 发布辅助 API 实现

---

### Story 5.4: 发布辅助UI组件
| 属性 | 值 |
|------|-----|
| 优先级 | P0 |
| 类型 | Frontend |
| 依赖 | 5.3 |
| 文件 | [5.4.publish-assist-ui.md](../stories/5.4.publish-assist-ui.md) |

**Tasks:**
- [ ] T1: 话题标签芯片组件
- [ ] T2: 标题列表组件
- [ ] T3: 剪贴板复制工具函数

---

### Story 0.3: 监控告警系统搭建
| 属性 | 值 |
|------|-----|
| 优先级 | P0 |
| 类型 | DevOps |
| 依赖 | 1.1 |
| 文件 | [0.3.monitoring-alerting.md](../stories/0.3.monitoring-alerting.md) |

**Tasks:**
- [ ] T1: Prometheus 指标采集
- [ ] T2: Grafana 仪表板配置
- [ ] T3: 告警规则配置

---

## 依赖关系

```
[4.3 视频合成] ──┬──► [5.1 视频预览] ──► [5.2 下载导出]
                │
                └──► [5.3 发布辅助服务] ──► [5.4 发布辅助UI]

[1.1 后端微服务] ──► [0.3 监控告警] (并行)
```

## 验收标准

- [ ] 用户可在线预览合成视频
- [ ] 用户可下载成品视频 (MP4)
- [ ] 用户可下载素材包 (ZIP)
- [ ] 系统可生成热门话题推荐
- [ ] 系统可生成视频标题推荐
- [ ] 用户可一键复制话题和标题
- [ ] 监控仪表板可显示系统健康状态
- [ ] 异常时可发送告警通知

## 风险与阻塞

| 风险 | 影响 | 缓解措施 |
|------|------|----------|
| 下载链接安全 | 资源泄露 | 使用签名 URL + 有效期 |
| 话题推荐过时 | 用户体验差 | 定期更新热门话题库 |

---

## MVP 完成标准

Sprint 5 完成后，系统应支持以下完整流程：

```
用户登录 → 创建任务 → 上传视频 → AI分析镜头 → 生成脚本
→ 选择配音 → 设置字幕 → 合成视频 → 预览 → 下载 → 获取发布建议
```

---

## Backlog (P1 - 后续迭代)

| Story | 名称 | 说明 |
|-------|------|------|
| 4.2 | 声音克隆功能 | 用户可使用自己的声音 |
| 5.5 | 历史任务管理 | 用户可查看和管理历史任务 |

---

## Change Log

| Date | Author | Changes |
|------|--------|---------|
| 2026-01-22 | SM Agent | Sprint 创建 |
