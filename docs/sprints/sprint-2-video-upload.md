# Sprint 2: 视频上传与AI分析

## Sprint 信息

| 属性 | 值 |
|------|-----|
| Sprint 编号 | 2 |
| Sprint 名称 | Video Upload & AI Analysis |
| 状态 | Planned |
| 创建日期 | 2026-01-22 |

## Sprint 目标

完成视频上传和 AI 镜头分析核心流程，用户可上传视频并获得智能镜头分析结果。

## 交付物

- 任务创建表单页面
- 视频分片上传服务 (OSS 直传)
- 视频上传 UI 组件 (进度显示)
- AI 镜头分析服务 (通义千问 VL)
- 镜头分析结果展示页面

## Sprint Backlog

### Story 1.4: 任务创建表单页面
| 属性 | 值 |
|------|-----|
| 优先级 | P0 |
| 类型 | Frontend |
| 依赖 | 1.2 |
| 文件 | [1.4.task-creation.md](../stories/1.4.task-creation.md) |

**Tasks:**
- [ ] T1: 店铺信息输入表单
- [ ] T2: 表单验证逻辑
- [ ] T3: 任务创建 API 集成

---

### Story 2.1: 视频上传服务实现
| 属性 | 值 |
|------|-----|
| 优先级 | P0 |
| 类型 | Backend |
| 依赖 | 1.4 |
| 文件 | [2.1.video-upload-service.md](../stories/2.1.video-upload-service.md) |

**Tasks:**
- [ ] T1: OSS 上传凭证生成 API
- [ ] T2: 上传完成回调处理
- [ ] T3: 视频元数据提取

---

### Story 2.2: 前端视频上传组件
| 属性 | 值 |
|------|-----|
| 优先级 | P0 |
| 类型 | Frontend |
| 依赖 | 2.1 |
| 文件 | [2.2.video-upload-ui.md](../stories/2.2.video-upload-ui.md) |

**Tasks:**
- [ ] T1: 拖拽上传组件
- [ ] T2: 分片上传逻辑
- [ ] T3: 上传进度展示

---

### Story 2.3: AI镜头分析服务
| 属性 | 值 |
|------|-----|
| 优先级 | P0 |
| 类型 | Backend |
| 依赖 | 2.1 |
| 文件 | [2.3.ai-shot-analysis.md](../stories/2.3.ai-shot-analysis.md) |

**Tasks:**
- [ ] T1: 视频抽帧服务
- [ ] T2: 通义千问 VL API 集成
- [ ] T3: 镜头分类和推荐算法

---

### Story 2.4: 镜头分析结果页面
| 属性 | 值 |
|------|-----|
| 优先级 | P0 |
| 类型 | Frontend |
| 依赖 | 2.3 |
| 文件 | [2.4.analysis-result-ui.md](../stories/2.4.analysis-result-ui.md) |

**Tasks:**
- [ ] T1: 镜头缩略图网格组件
- [ ] T2: 分类筛选功能
- [ ] T3: 推荐镜头高亮展示

---

## 依赖关系

```
[1.4 任务创建] ──► [2.1 上传服务] ──┬──► [2.2 上传UI]
                                    │
                                    └──► [2.3 AI分析] ──► [2.4 结果UI]
```

## 验收标准

- [ ] 用户可创建任务并填写店铺信息
- [ ] 视频可分片上传到 OSS，显示进度
- [ ] 上传完成后自动触发 AI 分析
- [ ] 分析完成后显示镜头分类结果
- [ ] 推荐镜头有明显标识

## 风险与阻塞

| 风险 | 影响 | 缓解措施 |
|------|------|----------|
| 通义千问 API 配额 | 分析请求受限 | 申请更高配额 |
| 大视频处理慢 | 用户体验差 | 显示预估时间 |

---

## Change Log

| Date | Author | Changes |
|------|--------|---------|
| 2026-01-22 | SM Agent | Sprint 创建 |
