# Story 3.2: 脚本编辑页面

## Status
Draft

## Story

**As a** 用户,
**I want** 查看和编辑AI生成的脚本,
**so that** 可以修改文案内容

## Acceptance Criteria

### AC1: 脚本展示与编辑

**Scenario**
```gherkin
GIVEN AI脚本生成完成
WHEN 用户查看脚本
THEN
  - 分段落展示脚本内容
  - 每段显示对应镜头标记
  - 支持点击编辑修改内容
  - 支持撤销修改
```

**Business Rules**
| ID | Rule |
|----|------|
| BR-1.1 | 编辑时显示字数统计 |
| BR-1.2 | 每段建议字数提示（配音时长参考） |

**UI Interaction**
| Trigger | Behavior |
|---------|----------|
| 点击编辑按钮 | 文本区域变为可编辑状态 |
| 编辑中 | 显示字数统计和保存按钮 |
| 点击保存 | 保存修改，显示成功提示 |

---

### AC2: 保存脚本修改

**Scenario**
```gherkin
GIVEN 用户编辑了脚本
WHEN 用户点击保存
THEN
  - 提交修改到后端
  - 更新任务脚本
  - 显示保存成功
```

**Business Rules**
| ID | Rule |
|----|------|
| BR-2.1 | 自动保存草稿到本地 |
| BR-2.2 | 页面离开前提示未保存内容 |

---

## Tasks / Subtasks

- [ ] **T1: 脚本展示组件** `[AC1]`
- [ ] **T2: 内联编辑功能** `[AC1]`
- [ ] **T3: 保存API调用** `[AC2]`

## Dev Notes

### Consumes APIs
- `GET /api/v1/tasks/{id}/script`
- `PUT /api/v1/tasks/{id}/script`
- `POST /api/v1/tasks/{id}/regenerate-script`

### Dependencies
- 依赖 Story 3.1 (AI脚本生成)

---

## Change Log

| Date | Agent | Status Transition | Details/Link |
|------|-------|-------------------|--------------|
| 2026-01-22 | SM | Created → Draft | Story created from PRD Epic 3 |
