# Story 1.3: å‰ç«¯é¡¹ç›®æ­å»ºä¸ç™»å½•é¡µé¢

## Status
Draft

## Story

**As a** ç”¨æˆ·,
**I want** é€šè¿‡å‹å¥½çš„ç™»å½•é¡µé¢è¿›è¡Œæ‰‹æœºå·éªŒè¯ç ç™»å½•,
**so that** å¯ä»¥æ–¹ä¾¿å¿«æ·åœ°è¿›å…¥ç³»ç»Ÿ

## Acceptance Criteria

### AC1: Vue3é¡¹ç›®åˆå§‹åŒ–

**Scenario**
```gherkin
GIVEN å¼€å‘ç¯å¢ƒå·²å‡†å¤‡å¥½Node.js
WHEN åˆ›å»ºå‰ç«¯é¡¹ç›®
THEN
  - ä½¿ç”¨Viteåˆ›å»ºVue3 + TypeScripté¡¹ç›®
  - é…ç½®TailwindCSSå’ŒElement Plus
  - é…ç½®Vue Routerå’ŒPinia
  - é…ç½®Axiosè¯·æ±‚æ‹¦æˆªå™¨
  - é¡¹ç›®å¯æ­£å¸¸å¯åŠ¨è¿è¡Œ
```

**Business Rules**
| ID | Rule |
|----|------|
| BR-1.1 | æ‰€æœ‰è¯·æ±‚è‡ªåŠ¨æºå¸¦Authorizationå¤´ |
| BR-1.2 | 401å“åº”è‡ªåŠ¨å°è¯•åˆ·æ–°Token |

**Error Handling**
| Scenario | Code | Message | Action |
|----------|------|---------|--------|
| æ„å»ºå¤±è´¥ | BUILD_ERROR | é¡¹ç›®æ„å»ºå¤±è´¥ | æ£€æŸ¥ä¾èµ–å’Œé…ç½® |

---

### AC2: ç™»å½•é¡µé¢å®ç°

**Scenario**
```gherkin
GIVEN ç”¨æˆ·è®¿é—®éœ€è¦è®¤è¯çš„é¡µé¢æˆ–ç‚¹å‡»ç™»å½•
WHEN ç”¨æˆ·è¿›å…¥ç™»å½•é¡µ
THEN
  - æ˜¾ç¤ºæ‰‹æœºå·è¾“å…¥æ¡†
  - æ˜¾ç¤ºéªŒè¯ç è¾“å…¥æ¡†å’Œå‘é€æŒ‰é’®
  - å‘é€æŒ‰é’®ç‚¹å‡»åæ˜¾ç¤º60ç§’å€’è®¡æ—¶
  - ç™»å½•æˆåŠŸåè·³è½¬åˆ°ç›®æ ‡é¡µé¢
```

**Business Rules**
| ID | Rule |
|----|------|
| BR-2.1 | æ‰‹æœºå·è¾“å…¥æ—¶å®æ—¶æ ¼å¼éªŒè¯ |
| BR-2.2 | å‘é€éªŒè¯ç åæŒ‰é’®ç¦ç”¨60ç§’ |
| BR-2.3 | ç™»å½•æˆåŠŸåTokenå­˜å‚¨åˆ°localStorage |

**Data Validation**
| Field | Type | Required | Rules | Error Message |
|-------|------|----------|-------|---------------|
| phone | string | true | 11ä½æ•°å­—ï¼Œä»¥1å¼€å¤´ | è¯·è¾“å…¥æ­£ç¡®çš„æ‰‹æœºå· |
| code | string | true | 6ä½æ•°å­— | è¯·è¾“å…¥6ä½éªŒè¯ç  |

**Error Handling**
| Scenario | Code | Message | Action |
|----------|------|---------|--------|
| ç½‘ç»œé”™è¯¯ | NETWORK_ERROR | ç½‘ç»œè¿æ¥å¤±è´¥ï¼Œè¯·æ£€æŸ¥ç½‘ç»œ | æ˜¾ç¤ºé‡è¯•æŒ‰é’® |

**UI Interaction**
| Trigger | Behavior |
|---------|----------|
| é¡µé¢åŠ è½½ | è‡ªåŠ¨èšç„¦æ‰‹æœºå·è¾“å…¥æ¡† |
| ç‚¹å‡»å‘é€éªŒè¯ç  | æŒ‰é’®æ˜¾ç¤º60ç§’å€’è®¡æ—¶ï¼Œç¦ç”¨çŠ¶æ€ |
| ç™»å½•æˆåŠŸ | æ˜¾ç¤ºæˆåŠŸæç¤ºï¼Œ1ç§’åè·³è½¬ |

---

## Tasks / Subtasks

### Infrastructure Tasks (Shared)

- [ ] **T0: ç¯å¢ƒå‡†å¤‡** `[ALL ACs]`
  - [ ] ç¡®è®¤Node.js 18+ç¯å¢ƒ
  - [ ] å‡†å¤‡APIä»£ç†é…ç½®

### Feature Implementation Tasks

#### AC1: Vue3é¡¹ç›®åˆå§‹åŒ–

- [ ] **T1: åˆ›å»ºVue3é¡¹ç›®** `[AC1]`
  - [ ] ä½¿ç”¨`npm create vite@latest`åˆ›å»ºé¡¹ç›®
  - [ ] é…ç½®TypeScriptä¸¥æ ¼æ¨¡å¼
  - [ ] é…ç½®è·¯å¾„åˆ«å(@/)

- [ ] **T2: å®‰è£…å’Œé…ç½®UIæ¡†æ¶** `[AC1]`
  - [ ] å®‰è£…TailwindCSS
  - [ ] å®‰è£…Element Plus
  - [ ] é…ç½®è‡ªåŠ¨å¯¼å…¥

- [ ] **T3: é…ç½®è·¯ç”±å’ŒçŠ¶æ€ç®¡ç†** `[AC1]`
  - [ ] å®‰è£…Vue Router
  - [ ] åˆ›å»ºè·¯ç”±é…ç½®ï¼ˆç™»å½•ã€é¦–é¡µã€åˆ›å»ºä»»åŠ¡ç­‰ï¼‰
  - [ ] å®‰è£…Pinia
  - [ ] åˆ›å»ºç”¨æˆ·çŠ¶æ€store

- [ ] **T4: é…ç½®Axios** `[AC1]`
  - [ ] åˆ›å»ºAxioså®ä¾‹
  - [ ] é…ç½®è¯·æ±‚æ‹¦æˆªå™¨ï¼ˆè‡ªåŠ¨æºå¸¦Tokenï¼‰
  - [ ] é…ç½®å“åº”æ‹¦æˆªå™¨ï¼ˆ401è‡ªåŠ¨åˆ·æ–°Tokenï¼‰
  - [ ] é…ç½®APIä»£ç†

#### AC2: ç™»å½•é¡µé¢å®ç°

- [ ] **T5: åˆ›å»ºç™»å½•é¡µé¢ç»„ä»¶** `[AC2]`
  - [ ] åˆ›å»ºLoginView.vue
  - [ ] å®ç°æ‰‹æœºå·è¾“å…¥æ¡†ï¼ˆå¸¦æ ¼å¼éªŒè¯ï¼‰
  - [ ] å®ç°éªŒè¯ç è¾“å…¥æ¡†
  - [ ] å®ç°å‘é€éªŒè¯ç æŒ‰é’®ï¼ˆå¸¦å€’è®¡æ—¶ï¼‰

- [ ] **T6: å®ç°ç™»å½•é€»è¾‘** `[AC2]`
  - [ ] è°ƒç”¨å‘é€éªŒè¯ç API
  - [ ] è°ƒç”¨ç™»å½•API
  - [ ] å­˜å‚¨Tokenåˆ°localStorage
  - [ ] ç™»å½•æˆåŠŸè·³è½¬

- [ ] **T7: å®ç°è·¯ç”±å®ˆå«** `[AC2]`
  - [ ] åˆ›å»ºè·¯ç”±å‰ç½®å®ˆå«
  - [ ] æœªç™»å½•è·³è½¬åˆ°ç™»å½•é¡µ
  - [ ] è®°å½•åŸç›®æ ‡é¡µé¢ï¼Œç™»å½•åè·³å›

### Integration Tasks

- [ ] **T8: é›†æˆéªŒè¯** `[ALL ACs]`
  - [ ] å®Œæ•´ç™»å½•æµç¨‹æµ‹è¯•
  - [ ] Tokenåˆ·æ–°æµ‹è¯•
  - [ ] è·¯ç”±å®ˆå«æµ‹è¯•

---

## Dev Notes

### Technical Constraints

- Vueç‰ˆæœ¬: 3.4+
- Viteç‰ˆæœ¬: 5.x
- TypeScriptä¸¥æ ¼æ¨¡å¼
- Node.js: 18+

### UI/UX Specification Reference

**ğŸ“ Reference File**: `docs/front-end-spec.md`

| Section | Why Relevant |
|---------|--------------|
| è®¾è®¡ç³»ç»Ÿ - é¢œè‰²è§„èŒƒ | ç™»å½•é¡µé…è‰² |
| è®¾è®¡ç³»ç»Ÿ - è¡¨å•ç»„ä»¶ | è¾“å…¥æ¡†ã€æŒ‰é’®æ ·å¼ |
| é¡µé¢è®¾è®¡ - ç™»å½•é¡µ | ç™»å½•é¡µå¸ƒå±€å’Œäº¤äº’ |

### Consumes APIs

- `POST /api/v1/auth/send-code` - å‘é€éªŒè¯ç 
- `POST /api/v1/auth/login` - ç™»å½•

### Dependencies

- ä¾èµ– Story 1.2 (ç”¨æˆ·è®¤è¯æœåŠ¡)

### File Locations

```
frontend/
â”œâ”€â”€ vite.config.ts
â”œâ”€â”€ tailwind.config.js
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ main.ts
â”‚   â”œâ”€â”€ App.vue
â”‚   â”œâ”€â”€ router/
â”‚   â”‚   â””â”€â”€ index.ts
â”‚   â”œâ”€â”€ stores/
â”‚   â”‚   â””â”€â”€ user.ts
â”‚   â”œâ”€â”€ api/
â”‚   â”‚   â”œâ”€â”€ axios.ts
â”‚   â”‚   â””â”€â”€ auth.ts
â”‚   â”œâ”€â”€ views/
â”‚   â”‚   â””â”€â”€ LoginView.vue
â”‚   â””â”€â”€ components/
â”‚       â””â”€â”€ common/
â””â”€â”€ index.html
```

---

## Change Log

| Date | Agent | Status Transition | Details/Link |
|------|-------|-------------------|--------------|
| 2026-01-22 | SM | Created â†’ Draft | Story created from PRD Epic 1 |
