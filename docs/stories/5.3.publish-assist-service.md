# Story 5.3: 发布辅助服务

## Status
Draft

## Story

**As a** 系统,
**I want** 为用户生成热门话题和标题推荐,
**so that** 用户发布视频时更高效

## Acceptance Criteria

### AC1: 热门话题推荐

**Scenario**
```gherkin
GIVEN 视频合成完成
WHEN 系统生成话题推荐
THEN
  - 基于店铺信息和脚本内容
  - 调用豆包API生成话题
  - 返回5-10个热门话题标签
  - 格式符合抖音/小红书规范
```

**Business Rules**
| ID | Rule |
|----|------|
| BR-1.1 | 话题以#开头 |
| BR-1.2 | 包含店铺名、品类、地区相关话题 |
| BR-1.3 | 优先推荐当前热门话题 |

**Error Handling**
| Scenario | Code | Message | Action |
|----------|------|---------|--------|
| 生成失败 | 500 | 话题生成失败 | 返回通用默认话题 |

**Example**
输入：海底捞火锅望京店
输出：
```json
["#海底捞", "#火锅探店", "#望京美食", "#必吃榜", "#美食推荐", "#吃货日常", "#探店达人", "#北京美食", "#团购优惠", "#周末去哪吃"]
```

---

### AC2: 标题推荐

**Scenario**
```gherkin
GIVEN 视频合成完成
WHEN 系统生成标题推荐
THEN
  - 基于脚本内容生成吸引眼球的标题
  - 返回3-5个标题选项
```

**Business Rules**
| ID | Rule |
|----|------|
| BR-2.1 | 标题20-50字 |
| BR-2.2 | 包含吸引点击的元素 |
| BR-2.3 | 符合平台调性 |

**Example**
输入：海底捞火锅探店脚本
输出：
```json
[
  "望京这家海底捞太绝了！服务好到让你感动流泪",
  "人均89吃海底捞？这个团购也太香了吧！",
  "海底捞探店｜必点招牌毛肚，七上八下太嫩了",
  "朋友聚餐首选！望京海底捞氛围感拉满"
]
```

---

## Tasks / Subtasks

- [ ] **T1: 话题生成Prompt设计** `[AC1]`
- [ ] **T2: 标题生成Prompt设计** `[AC2]`
- [ ] **T3: 发布辅助API实现** `[AC1, AC2]`

## Dev Notes

### Provides APIs
- `GET /api/v1/tasks/{id}/publish-assist`
- `POST /api/v1/tasks/{id}/publish-assist/regenerate`

### Dependencies
- 依赖 Story 4.3 (视频自动剪辑合成)

---

## Change Log

| Date | Agent | Status Transition | Details/Link |
|------|-------|-------------------|--------------|
| 2026-01-22 | SM | Created → Draft | Story created from PRD Epic 5 |
