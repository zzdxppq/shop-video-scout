# Story 5.5: 历史任务管理

## Status
Draft

## Story

**As a** 用户,
**I want** 查看和管理我的历史任务,
**so that** 可以回顾之前生成的视频

## Acceptance Criteria

### AC1: 历史任务列表

**Scenario**
```gherkin
GIVEN 用户访问历史任务页面
WHEN 页面加载
THEN
  - 显示用户所有任务列表
  - 按创建时间倒序排列
  - 显示任务状态、店铺名、创建时间
  - 支持分页加载
```

**Business Rules**
| ID | Rule |
|----|------|
| BR-1.1 | 每页显示10条 |
| BR-1.2 | 显示任务状态图标 |

**UI Interaction**
| Trigger | Behavior |
|---------|----------|
| 点击任务卡片 | 跳转到任务详情/结果页面 |
| 滚动到底部 | 自动加载更多 |

---

### AC2: 删除任务

**Scenario**
```gherkin
GIVEN 用户在历史任务列表
WHEN 用户删除任务
THEN
  - 显示确认弹窗
  - 确认后删除任务和相关文件
  - 从列表中移除
```

**Business Rules**
| ID | Rule |
|----|------|
| BR-2.1 | 删除后无法恢复 |
| BR-2.2 | 同时删除OSS上的视频文件 |

**Error Handling**
| Scenario | Code | Message | Action |
|----------|------|---------|--------|
| 删除失败 | 500 | 删除失败，请重试 | 显示重试按钮 |

**UI Interaction**
| Trigger | Behavior |
|---------|----------|
| 点击删除 | 显示确认弹窗 |
| 确认删除 | 显示加载状态，删除后从列表移除 |

---

## Tasks / Subtasks

- [ ] **T1: 历史任务列表页面** `[AC1]`
- [ ] **T2: 分页加载逻辑** `[AC1]`
- [ ] **T3: 删除任务功能** `[AC2]`

## Dev Notes

### Provides APIs
- `DELETE /api/v1/tasks/{id}`

### Consumes APIs
- `GET /api/v1/tasks`

### Dependencies
- 依赖 Story 1.4 (任务创建表单页面)

### Priority
P1 - 可在核心流程完成后实现

---

## Change Log

| Date | Agent | Status Transition | Details/Link |
|------|-------|-------------------|--------------|
| 2026-01-22 | SM | Created → Draft | Story created from PRD Epic 5 |
