# Story 1.4: ä»»åŠ¡åˆ›å»ºè¡¨å•é¡µé¢

## Status
Draft

## Story

**As a** å·²ç™»å½•ç”¨æˆ·,
**I want** é€šè¿‡è¡¨å•å¡«å†™åº—é“ºä¿¡æ¯å¹¶åˆ›å»ºä»»åŠ¡,
**so that** å¯ä»¥å¼€å§‹è§†é¢‘åˆ›ä½œæµç¨‹

## Acceptance Criteria

### AC1: åº—é“ºä¿¡æ¯è¡¨å•

**Scenario**
```gherkin
GIVEN å·²ç™»å½•ç”¨æˆ·è®¿é—®åˆ›å»ºä»»åŠ¡é¡µé¢
WHEN ç”¨æˆ·å¡«å†™åº—é“ºä¿¡æ¯
THEN
  - æ˜¾ç¤ºåº—é“ºåç§°è¾“å…¥æ¡†ï¼ˆå¿…å¡«ï¼‰
  - æ˜¾ç¤ºåº—é“ºç±»å‹å•é€‰æŒ‰é’®ç»„ï¼ˆå¿…å¡«ï¼‰
  - æ˜¾ç¤ºå•†å“/ä¼˜æƒ æè¿°æ–‡æœ¬æ¡†ï¼ˆé€‰å¡«ï¼‰
  - æ˜¾ç¤ºè§†é¢‘é£æ ¼å•é€‰æŒ‰é’®ç»„ï¼ˆå¿…å¡«ï¼‰
  - è¡¨å•éªŒè¯é€šè¿‡åå¯ç”¨ä¸‹ä¸€æ­¥æŒ‰é’®
```

**Business Rules**
| ID | Rule |
|----|------|
| BR-1.1 | åº—é“ºåç§°æœ€å¤§200å­—ç¬¦ |
| BR-1.2 | ä¼˜æƒ æè¿°æœ€å¤§500å­—ç¬¦ |
| BR-1.3 | å¿…å¡«é¡¹æœªå¡«å†™æ—¶æ˜¾ç¤ºçº¢è‰²æç¤º |

**Data Validation**
| Field | Type | Required | Rules | Error Message |
|-------|------|----------|-------|---------------|
| shop_name | string | true | 1-200å­—ç¬¦ | è¯·è¾“å…¥åº—é“ºåç§° |
| shop_type | enum | true | food\|beauty\|entertainment\|other | è¯·é€‰æ‹©åº—é“ºç±»å‹ |
| promotion_text | string | false | æœ€å¤§500å­—ç¬¦ | ä¼˜æƒ æè¿°ä¸èƒ½è¶…è¿‡500å­— |
| video_style | enum | true | recommend\|review\|vlog | è¯·é€‰æ‹©è§†é¢‘é£æ ¼ |

**Error Handling**
| Scenario | Code | Message | Action |
|----------|------|---------|--------|
| è¡¨å•éªŒè¯å¤±è´¥ | VALIDATION_ERROR | è¯·å¡«å†™å¿…å¡«é¡¹ | é«˜äº®æ˜¾ç¤ºæœªå¡«å†™çš„å¿…å¡«é¡¹ |

**UI Interaction**
| Trigger | Behavior |
|---------|----------|
| è¾“å…¥å†…å®¹ | å®æ—¶éªŒè¯å¹¶æ˜¾ç¤ºé”™è¯¯æç¤º |
| ç‚¹å‡»ä¸‹ä¸€æ­¥ | éªŒè¯é€šè¿‡åˆ™æ˜¾ç¤ºè§†é¢‘ä¸Šä¼ åŒºåŸŸ |

---

### AC2: åˆ›å»ºä»»åŠ¡API

**Scenario**
```gherkin
GIVEN ç”¨æˆ·å¡«å†™å®Œåº—é“ºä¿¡æ¯
WHEN æäº¤åˆ›å»ºä»»åŠ¡è¯·æ±‚
THEN
  - åç«¯åˆ›å»ºä»»åŠ¡è®°å½•
  - è¿”å›ä»»åŠ¡ID
  - ä»»åŠ¡çŠ¶æ€è®¾ä¸ºuploading
```

**Business Rules**
| ID | Rule |
|----|------|
| BR-2.1 | ä»»åŠ¡ä¸å½“å‰ç™»å½•ç”¨æˆ·å…³è” |
| BR-2.2 | åŒä¸€ç”¨æˆ·åŒæ—¶æœ€å¤šæœ‰5ä¸ªè¿›è¡Œä¸­çš„ä»»åŠ¡ |

**Error Handling**
| Scenario | Code | Message | Action |
|----------|------|---------|--------|
| ä»»åŠ¡æ•°é‡è¶…é™ | 429 | æ‚¨æœ‰å¤ªå¤šè¿›è¡Œä¸­çš„ä»»åŠ¡ï¼Œè¯·å®Œæˆåå†åˆ›å»º | è¿”å›å½“å‰è¿›è¡Œä¸­ä»»åŠ¡åˆ—è¡¨ |

**Examples**
- **Input**: `POST /api/v1/tasks {"shop_name": "æµ·åº•æç«é”…(æœ›äº¬åº—)", "shop_type": "food", "promotion_text": "äººå‡89ï¼Œå¿…ç‚¹æ‹›ç‰Œæ¯›è‚š", "video_style": "recommend"}`
- **Expected**: `201 Created {"id": 12345, "status": "uploading", "created_at": "2026-01-16T10:00:00Z"}`

---

## Tasks / Subtasks

### Infrastructure Tasks (Shared)

- [ ] **T0: å‡†å¤‡å·¥ä½œ** `[ALL ACs]`
  - [ ] ç¡®è®¤å‰ç«¯è·¯ç”±é…ç½®
  - [ ] ç¡®è®¤åç«¯task-serviceæ¨¡å—

### Feature Implementation Tasks

#### AC1: åº—é“ºä¿¡æ¯è¡¨å•

- [ ] **T1: åˆ›å»ºä»»åŠ¡åˆ›å»ºé¡µé¢** `[AC1]`
  - [ ] åˆ›å»ºCreateTaskView.vue
  - [ ] å®ç°æ­¥éª¤æŒ‡ç¤ºå™¨ç»„ä»¶ï¼ˆStep 1: å¡«å†™ä¿¡æ¯ï¼‰
  - [ ] åˆ›å»ºåº—é“ºä¿¡æ¯è¡¨å•ç»„ä»¶

- [ ] **T2: å®ç°è¡¨å•ç»„ä»¶** `[AC1]`
  - [ ] åº—é“ºåç§°è¾“å…¥æ¡†ï¼ˆå¸¦å­—æ•°ç»Ÿè®¡ï¼‰
  - [ ] åº—é“ºç±»å‹å•é€‰æŒ‰é’®ç»„ï¼ˆé¤é¥®ç¾é£Ÿã€ç¾å®¹ç¾å‘ã€ä¼‘é—²å¨±ä¹ã€å…¶ä»–ï¼‰
  - [ ] ä¼˜æƒ æè¿°æ–‡æœ¬æ¡†ï¼ˆå¸¦å­—æ•°ç»Ÿè®¡ï¼‰
  - [ ] è§†é¢‘é£æ ¼å•é€‰æŒ‰é’®ç»„ï¼ˆç§è‰å®‰åˆ©ã€çœŸå®æµ‹è¯„ã€æ¢åº—vlogï¼‰

- [ ] **T3: å®ç°è¡¨å•éªŒè¯** `[AC1]`
  - [ ] å¿…å¡«é¡¹éªŒè¯
  - [ ] å­—ç¬¦é•¿åº¦éªŒè¯
  - [ ] å®æ—¶éªŒè¯åé¦ˆ

#### AC2: åˆ›å»ºä»»åŠ¡API

- [ ] **T4: å®ç°åç«¯ä»»åŠ¡åˆ›å»ºAPI** `[AC2]`
  - [ ] åˆ›å»ºTaskController.createTask()
  - [ ] å®ç°ä»»åŠ¡æ•°é‡é™åˆ¶æ£€æŸ¥
  - [ ] åˆ›å»ºä»»åŠ¡è®°å½•
  - [ ] è¿”å›ä»»åŠ¡ä¿¡æ¯

- [ ] **T5: å®ç°å‰ç«¯APIè°ƒç”¨** `[AC2]`
  - [ ] åˆ›å»ºä»»åŠ¡APIæœåŠ¡
  - [ ] è¡¨å•æäº¤é€»è¾‘
  - [ ] åˆ›å»ºæˆåŠŸåè·³è½¬åˆ°ä¸Šä¼ é¡µé¢

### Integration Tasks

- [ ] **T6: é›†æˆéªŒè¯** `[ALL ACs]`
  - [ ] å®Œæ•´åˆ›å»ºä»»åŠ¡æµç¨‹æµ‹è¯•
  - [ ] ä»»åŠ¡æ•°é‡é™åˆ¶æµ‹è¯•
  - [ ] è¡¨å•éªŒè¯æµ‹è¯•

---

## Dev Notes

### Technical Constraints

- åº—é“ºç±»å‹æšä¸¾: food(é¤é¥®ç¾é£Ÿ), beauty(ç¾å®¹ç¾å‘), entertainment(ä¼‘é—²å¨±ä¹), other(å…¶ä»–)
- è§†é¢‘é£æ ¼æšä¸¾: recommend(ç§è‰å®‰åˆ©å‹), review(çœŸå®æµ‹è¯„å‹), vlog(æ¢åº—vlogå‹)

### UI/UX Specification Reference

**ğŸ“ Reference File**: `docs/front-end-spec.md`

| Section | Why Relevant |
|---------|--------------|
| æ­¥éª¤å¼•å¯¼å¼æµç¨‹ | ä»»åŠ¡åˆ›å»ºæµç¨‹è®¾è®¡ |
| è®¾è®¡ç³»ç»Ÿ - è¡¨å•ç»„ä»¶ | è¾“å…¥æ¡†ã€å•é€‰æŒ‰é’®æ ·å¼ |
| é¡µé¢è®¾è®¡ - åˆ›å»ºä»»åŠ¡é¡µ | é¡µé¢å¸ƒå±€ |

### Provides APIs

- `POST /api/v1/tasks` - åˆ›å»ºä»»åŠ¡
- `GET /api/v1/tasks` - è·å–ä»»åŠ¡åˆ—è¡¨
- `GET /api/v1/tasks/{id}` - è·å–ä»»åŠ¡è¯¦æƒ…

### Dependencies

- ä¾èµ– Story 1.2 (ç”¨æˆ·è®¤è¯æœåŠ¡)
- ä¾èµ– Story 1.3 (å‰ç«¯é¡¹ç›®)

### File Locations

```
backend/task-service/
â”œâ”€â”€ src/main/java/com/shopvideoscout/task/
â”‚   â”œâ”€â”€ controller/
â”‚   â”‚   â””â”€â”€ TaskController.java
â”‚   â”œâ”€â”€ service/
â”‚   â”‚   â””â”€â”€ TaskService.java
â”‚   â”œâ”€â”€ entity/
â”‚   â”‚   â””â”€â”€ Task.java
â”‚   â”œâ”€â”€ dto/
â”‚   â”‚   â”œâ”€â”€ CreateTaskRequest.java
â”‚   â”‚   â””â”€â”€ TaskResponse.java
â”‚   â””â”€â”€ mapper/
â”‚       â””â”€â”€ TaskMapper.java

frontend/src/
â”œâ”€â”€ views/
â”‚   â””â”€â”€ CreateTaskView.vue
â”œâ”€â”€ components/
â”‚   â””â”€â”€ task/
â”‚       â”œâ”€â”€ ShopInfoForm.vue
â”‚       â””â”€â”€ StepIndicator.vue
â””â”€â”€ api/
    â””â”€â”€ task.ts
```

---

## Change Log

| Date | Agent | Status Transition | Details/Link |
|------|-------|-------------------|--------------|
| 2026-01-22 | SM | Created â†’ Draft | Story created from PRD Epic 1 |
