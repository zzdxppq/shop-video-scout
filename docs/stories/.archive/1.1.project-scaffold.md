# Story 1.1: 搭建前后端项目脚手架

## Status
Approved

## Story

**As a** 开发者,
**I want** 创建项目基础结构，包括Vue 3前端和Spring Cloud后端,
**so that** 可以在统一的技术架构上进行后续功能开发

## Description

创建项目基础结构，包括：
- Vue 3 + Vite 前端项目
- Spring Cloud 多模块后端项目
- 公共模块 (common-core, common-security)

## Acceptance Criteria

### AC1: 前端项目初始化

**Scenario**
```gherkin
GIVEN 开发者需要创建前端项目
WHEN 执行项目初始化命令
THEN
  - 创建 Vue 3 + Vite + TypeScript 项目
  - 集成 Element Plus UI组件库
  - 配置 ESLint + Prettier
  - 项目可启动并显示首页
```

**Business Rules**
| ID | Rule |
|----|------|
| BR-1.1 | Vue版本 >= 3.4 |
| BR-1.2 | Vite版本 >= 5.x |
| BR-1.3 | TypeScript严格模式 |

### AC2: 后端多模块项目创建

**Scenario**
```gherkin
GIVEN 开发者需要创建后端微服务架构
WHEN 执行项目初始化
THEN
  - 创建 Maven 多模块项目
  - 包含 gateway-service 模块
  - 包含 common-core, common-security 模块
  - 配置 Spring Cloud 依赖管理
```

**Business Rules**
| ID | Rule |
|----|------|
| BR-2.1 | Java版本 = 21 |
| BR-2.2 | Spring Boot版本 >= 3.2 |
| BR-2.3 | Spring Cloud版本 = 2023.x |

### AC3: Nacos服务注册

**Scenario**
```gherkin
GIVEN Gateway服务启动
WHEN 连接Nacos服务器
THEN
  - 服务成功注册到Nacos
  - 健康检查端点返回200
```

## Tasks / Subtasks

## Infrastructure Tasks (Shared)

- [ ] **T0: 环境准备** `[ALL ACs]`
  - [ ] 确认 Java 21, Node.js 18+, Maven 环境
  - [ ] 准备 Nacos 服务器地址配置

## Feature Implementation Tasks

### AC1: 前端项目初始化

- [ ] **T1: 创建Vue 3前端项目** `[AC1]`
  - [ ] 使用 `npm create vite@latest` 创建项目
  - [ ] 安装依赖: vue-router, pinia, axios, element-plus
  - [ ] 配置 vite.config.ts (代理、别名)
  - [ ] 配置 ESLint + Prettier
  - [ ] 创建基础目录结构 (views, components, api, stores)
  - [ ] 验证项目启动成功

### AC2: 后端多模块项目创建

- [ ] **T2: 创建Spring Cloud多模块项目** `[AC2]`
  - [ ] 创建父POM，配置依赖版本管理
  - [ ] 创建 common-core 模块 (公共工具类、响应封装)
  - [ ] 创建 common-security 模块 (JWT工具、安全配置)
  - [ ] 创建 gateway-service 模块
  - [ ] 配置 Nacos 依赖和连接

### AC3: Nacos服务注册

- [ ] **T3: 配置Nacos服务注册** `[AC3]`
  - [ ] 配置 gateway-service 的 bootstrap.yml
  - [ ] 添加健康检查端点
  - [ ] 验证服务注册成功

## Integration & Verification Tasks

- [ ] **T4: 集成测试** `[ALL ACs]`
  - [ ] 前端项目成功启动
  - [ ] 后端Gateway成功启动并注册到Nacos
  - [ ] 健康检查端点返回正常

## Dev Notes

### Technical Constraints

- Vue 3.4+, Vite 5.x, Element Plus 2.x
- Java 21, Spring Boot 3.2, Spring Cloud 2023.x
- 使用 Maven 多模块结构

### File Locations

```
shop-video-scout/
├── frontend/                    # Vue 3 前端
│   ├── src/
│   │   ├── views/
│   │   ├── components/
│   │   ├── api/
│   │   ├── stores/
│   │   └── router/
│   └── vite.config.ts
├── backend/                     # Spring Cloud 后端
│   ├── pom.xml                  # 父POM
│   ├── common-core/
│   ├── common-security/
│   └── gateway-service/
```

## Source Proposals
- TCP-2026-001 Story Requirement T1

## Architect Review Results

### Review Date: 2026-01-14
### Reviewed By: Aiden (Architect)
### Architecture Score: 9/10
### Review Round: 1
### Test Design Level: Simple

### Decision: APPROVED

Story技术方案与TCP-2026-001架构设计完全对齐，技术栈选择正确，项目结构清晰，可直接进入开发阶段。

### Issues

#### Critical Issues (0)
无

#### High Issues (0)
无

#### Medium Issues (0)
无

#### Low Issues (3)
- **Element Plus版本约束** (AC1 BR): 建议明确版本 `>= 2.x`
- **MyBatis-Plus依赖** (AC2): 可在后续服务Story中配置ORM层
- **Nacos配置细节** (AC3): 建议补充namespace/group配置说明

### Recommendations
- 前端项目建议使用 `pnpm` 替代 `npm` 以提升依赖管理效率
- 后端父POM建议添加 `spring-cloud-alibaba-dependencies` BOM
- 考虑添加 `.editorconfig` 统一代码风格

## QA Test Design Metadata

| Field | Value |
|-------|-------|
| test_design_level | Simple |
| complexity_indicators | 1 |
| security_sensitive | false |
| calculated_by | Architect (post-review) |
| calculation_date | 2026-01-14 |

## Change Log

| Date | Agent | Status Transition | Details/Link |
|------|-------|-------------------|--------------|
| 2026-01-14 | SM | Created → AwaitingArchReview | Story created from TCP-2026-001 |
| 2026-01-14 | Architect | AwaitingArchReview → Approved | Score: 9/10, 0 critical / 0 major issues |
